<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Halal Guide Enterprise</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="auth-screen">
        <div class="auth-container">
            <div class="auth-logo">
                <i class="fas fa-kaaba"></i>
                <h1>Halal Guide</h1>
                <p>–í–∞—à –¥—É—Ö–æ–≤–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫</p>
            </div>

            <div id="login-form" class="auth-form">
                <div class="input-field">
                    <i class="fas fa-user"></i>
                    <input type="text" id="login-username" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
                </div>
                <div class="input-field">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="login-password" placeholder="–ü–∞—Ä–æ–ª—å">
                </div>
                <button class="btn-primary" onclick="login()">–í–û–ô–¢–ò</button>
                <p class="switch-auth">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <span onclick="toggleAuth('register')">–°–æ–∑–¥–∞—Ç—å</span></p>
            </div>

            <div id="register-form" class="auth-form" style="display:none;">
                <div class="input-field">
                    <i class="fas fa-user-plus"></i>
                    <input type="text" id="reg-username" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –∏–º—è">
                </div>
                <div class="input-field">
                    <i class="fas fa-key"></i>
                    <input type="password" id="reg-password" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å">
                </div>
                <button class="btn-primary" onclick="register()">–ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–¢–¨–°–Ø</button>
                <p class="switch-auth">–ï—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <span onclick="toggleAuth('login')">–í–æ–π—Ç–∏</span></p>
            </div>
        </div>
    </div>

    <div id="app-container" style="display:none;">
        
        <div id="preloader"><div class="spinner"></div></div>

        <div id="tab-home" class="screen active">
            <div class="header-premium">
                <div>
                    <h1 class="welcome-text">–ê—Å-—Å–∞–ª—è–º—É –∞–ª–µ–π–∫—É–º,</h1>
                    <h2 id="user-name-display">–ú—É—Å—É–ª—å–º–∞–Ω–∏–Ω</h2>
                </div>
                <div id="status-badge" class="badge-pill free" onclick="showPaywall()">FREE</div>
            </div>

            <div class="daily-card-container">
                <div class="daily-card">
                    <div class="card-label"><i class="fas fa-star"></i> –ò–ª—å–º –¥–Ω—è</div>
                    <div id="daily-arabic" class="arabic-text">...</div>
                    <div id="daily-translation" class="trans-text">–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è...</div>
                    <div id="daily-source" class="source-text">...</div>
                </div>
            </div>

            <h3 class="section-title">–°–µ—Ä–≤–∏—Å—ã</h3>
            <div class="grid-menu">
                <div class="menu-item" onclick="switchTab('scan')">
                    <div class="icon-box green"><i class="fas fa-barcode"></i></div><span>–°–∫–∞–Ω–µ—Ä</span>
                </div>
                <div class="menu-item" onclick="switchTab('chat')">
                    <div class="icon-box gold"><i class="fas fa-mosque"></i></div><span>–ò–º–∞–º</span>
                </div>
                <div class="menu-item" onclick="switchTab('map')">
                    <div class="icon-box blue"><i class="fas fa-map-marker-alt"></i></div><span>–ú–µ—á–µ—Ç–∏</span>
                </div>
                <div class="menu-item" onclick="logout()">
                    <div class="icon-box red"><i class="fas fa-sign-out-alt"></i></div><span>–í—ã–π—Ç–∏</span>
                </div>
            </div>
        </div>

        <div id="tab-scan" class="screen">
            <div class="top-nav"><h2>–°–∫–∞–Ω–µ—Ä –ü—Ä–æ–¥—É–∫—Ç–æ–≤</h2></div>
            <div class="scanner-ui">
                <div class="camera-frame">
                    <div id="reader"></div>
                    <div class="scan-overlay"><div class="laser"></div></div>
                </div>
                <p class="scan-instruction">–ù–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É –Ω–∞ —à—Ç—Ä–∏—Ö–∫–æ–¥</p>
                
                <div class="scan-actions">
                    <div class="input-wrapper">
                        <input type="number" id="barcode-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –≤—Ä—É—á–Ω—É—é...">
                        <button onclick="manualSearch()" class="btn-go"><i class="fas fa-arrow-right"></i></button>
                    </div>
                    <div class="divider"><span>–ò–õ–ò</span></div>
                    <button class="btn-photo" onclick="document.getElementById('file-input').click()"><i class="fas fa-camera"></i> –°—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞—Ç—å –°–æ—Å—Ç–∞–≤</button>
                    <input type="file" id="file-input" accept="image/*" capture="environment" hidden>
                </div>
            </div>
        </div>

        <div id="tab-chat" class="screen">
            <div class="top-nav">
                <div class="status-dot"></div>
                <h2>–ú—É—Ñ—Ç–∏–π –ò–ò</h2>
            </div>
            <div id="chat-history" class="chat-history">
                <div class="msg ai">–ê—Å-—Å–∞–ª—è–º—É –∞–ª–µ–π–∫—É–º! –Ø –≥–æ—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã.</div>
            </div>
            <div class="chat-input-area">
                <input type="text" id="chat-input" placeholder="–í–∞—à –≤–æ–ø—Ä–æ—Å...">
                <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>

        <div id="tab-map" class="screen">
            <div id="map"></div>
            <button class="btn-locate" onclick="locateMe()"><i class="fas fa-location-arrow"></i> –ù–∞–π—Ç–∏ –º–µ–Ω—è</button>
        </div>

        <div class="bottom-nav">
            <div class="nav-btn active" onclick="switchTab('home', this)"><i class="fas fa-home"></i></div>
            <div class="nav-btn" onclick="switchTab('map', this)"><i class="fas fa-map"></i></div>
            <div class="nav-btn-center" onclick="switchTab('scan', this)"><div class="scan-circle"><i class="fas fa-qrcode"></i></div></div>
            <div class="nav-btn" onclick="switchTab('chat', this)"><i class="fas fa-comment-dots"></i></div>
        </div>
    </div>

    <div id="result-modal" class="modal">
        <div class="modal-content">
            <h3 id="res-title">...</h3>
            <div id="res-badge" class="badge">...</div>
            <p id="res-reason" class="reason-text">...</p>
            <div class="details-box"><ul id="res-list"></ul></div>
            <button class="btn-full" onclick="closeModal('result-modal')">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <div id="paywall-modal" class="modal">
        <div class="modal-content paywall-box">
            <div class="crown-anim"><i class="fas fa-crown"></i></div>
            <h2>Premium –î–æ—Å—Ç—É–ø</h2>
            <p class="paywall-text">–í—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è.</p>
            <ul class="features-list">
                <li>üöÄ –ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</li>
                <li>üì∏ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ª—é–±–æ–≥–æ —Ñ–æ—Ç–æ</li>
                <li>üïã –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π —á–∞—Ç —Å –ò–º–∞–º–æ–º</li>
            </ul>
            <div class="price-tag">15.00 TJS / –º–µ—Å—è—Ü</div>
            <button class="btn-buy" onclick="buyPremium()">–û–ü–õ–ê–¢–ò–¢–¨ (–ê–ª–∏—Ñ/–î—É—à–∞–Ω–±–µ –°–∏—Ç–∏)</button>
            <button class="btn-cancel" onclick="closeModal('paywall-modal')">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>